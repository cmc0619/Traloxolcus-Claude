<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soccer Rig - Watch Games</title>
    <link rel="stylesheet" href="/static/css/viewer.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Auth Gate (shown when not authenticated) -->
        <div id="auth-gate" class="auth-gate">
            <div class="auth-card">
                <div class="auth-logo">Soccer Rig</div>
                <h1>Welcome</h1>
                <p>Enter your team code to access games</p>
                <form id="auth-form">
                    <input type="text" id="team-code" placeholder="Team Code (e.g., TIGERS2024)" autocomplete="off" autofocus>
                    <button type="submit" class="btn btn-primary btn-large">Enter</button>
                </form>
                <p class="auth-hint">Don't have a code? Contact your coach.</p>
            </div>
        </div>

        <!-- Main Viewer (shown when authenticated) -->
        <div id="main-viewer" class="main-viewer hidden">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <div class="logo">Soccer Rig</div>
                    <nav class="nav-tabs">
                        <button class="nav-tab active" data-tab="games">Games</button>
                        <button class="nav-tab" data-tab="players">Players</button>
                        <button class="nav-tab" data-tab="search">Search</button>
                        <button class="nav-tab" data-tab="highlights">My Clips</button>
                    </nav>
                </div>
                <div class="header-right">
                    <span class="team-badge" id="team-name">Team</span>
                    <button class="btn btn-icon" id="theme-toggle" title="Toggle Dark Mode">&#9790;</button>
                    <button class="btn btn-secondary btn-small" id="logout-btn">Logout</button>
                </div>
            </header>

            <main class="main-content">
                <!-- Games Tab -->
                <div id="tab-games" class="tab-content active">
                    <div class="page-header">
                        <h1>Games</h1>
                        <div class="filter-controls">
                            <select id="season-filter">
                                <option value="">All Seasons</option>
                                <option value="2024-fall">Fall 2024</option>
                                <option value="2024-spring">Spring 2024</option>
                            </select>
                        </div>
                    </div>
                    <div class="games-grid" id="games-grid">
                        <div class="loading">Loading games...</div>
                    </div>
                </div>

                <!-- Players Tab -->
                <div id="tab-players" class="tab-content">
                    <div class="page-header">
                        <h1>Players</h1>
                    </div>
                    <div class="players-grid" id="players-grid">
                        <div class="loading">Loading players...</div>
                    </div>
                </div>

                <!-- Search Tab -->
                <div id="tab-search" class="tab-content">
                    <div class="page-header">
                        <h1>Search</h1>
                        <p class="subtitle">Ask anything about the games</p>
                    </div>
                    <div class="search-hero">
                        <div class="search-box-large">
                            <input type="text" id="nl-search" placeholder="Try: &quot;Show me all of Jake's goals&quot; or &quot;Goalkeeper saves in the second half&quot;">
                            <button class="btn btn-primary" id="search-btn">Search</button>
                        </div>
                        <div class="search-suggestions-container">
                            <div class="quick-searches">
                                <span class="quick-search-label">Try:</span>
                                <button class="quick-search" data-query="goals scored today">Goals today</button>
                                <button class="quick-search" data-query="best saves">Best saves</button>
                                <button class="quick-search" data-query="assists this season">Assists</button>
                                <button class="quick-search" data-query="shots on target">Shots on target</button>
                            </div>
                        </div>
                    </div>
                    <div class="search-results" id="search-results" style="display:none;">
                        <div class="results-header">
                            <h2>Results</h2>
                            <span class="result-count" id="result-count">0 results</span>
                        </div>
                        <div class="results-list" id="results-list"></div>
                    </div>
                </div>

                <!-- Highlights/Clips Tab -->
                <div id="tab-highlights" class="tab-content">
                    <div class="page-header">
                        <h1>My Clips</h1>
                        <p class="subtitle">Saved highlights and clips</p>
                    </div>
                    <div class="clips-grid" id="saved-clips">
                        <div class="empty-state">
                            <div class="empty-icon">&#127909;</div>
                            <h3>No saved clips yet</h3>
                            <p>When you save clips from games, they'll appear here</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Video Player Modal -->
        <div class="modal" id="video-modal">
            <div class="modal-content modal-fullscreen">
                <div class="video-player-container">
                    <div class="video-header">
                        <h2 id="video-title">Game Title</h2>
                        <button class="btn-close" onclick="viewer.closeVideo()">&times;</button>
                    </div>
                    <div class="video-wrapper">
                        <video id="video-player" controls>
                            <source src="" type="video/mp4">
                        </video>
                        <div class="video-overlay" id="video-overlay">
                            <div class="loading">Loading video...</div>
                        </div>
                    </div>
                    <div class="video-controls-extra">
                        <div class="video-timeline">
                            <div class="timeline-events" id="timeline-events"></div>
                        </div>
                        <div class="video-actions">
                            <button class="btn btn-secondary" id="clip-start-btn">
                                <span>&#9998;</span> Mark Clip Start
                            </button>
                            <button class="btn btn-secondary" id="clip-end-btn" disabled>
                                <span>&#10003;</span> Mark Clip End
                            </button>
                            <button class="btn btn-primary" id="save-clip-btn" disabled>
                                <span>&#128190;</span> Save Clip
                            </button>
                            <button class="btn btn-secondary" id="share-btn">
                                <span>&#128279;</span> Share
                            </button>
                        </div>
                    </div>
                    <div class="video-sidebar">
                        <div class="sidebar-section">
                            <h3>Events</h3>
                            <div class="event-list" id="video-events"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Player Profile Modal -->
        <div class="modal" id="player-modal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <div class="player-profile-header">
                        <div class="player-avatar" id="player-avatar">00</div>
                        <div class="player-info">
                            <h2 id="player-name">Player Name</h2>
                            <p id="player-position">Position</p>
                        </div>
                    </div>
                    <button class="btn-close" onclick="viewer.hideModal('player-modal')">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="player-stats-grid" id="player-stats-grid"></div>
                    <div class="player-section">
                        <h3>Recent Highlights</h3>
                        <div class="player-highlights" id="player-highlights"></div>
                    </div>
                    <div class="player-section">
                        <h3>Heatmap</h3>
                        <div class="heatmap-container">
                            <canvas id="player-heatmap" width="600" height="400"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Share Modal -->
        <div class="modal" id="share-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Share</h2>
                    <button class="btn-close" onclick="viewer.hideModal('share-modal')">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Share this moment with family and friends</p>
                    <div class="share-link-box">
                        <input type="text" id="share-link" readonly>
                        <button class="btn btn-primary" id="copy-link-btn">Copy</button>
                    </div>
                    <div class="share-buttons">
                        <button class="share-btn share-sms" id="share-sms">
                            <span>&#128172;</span> Text
                        </button>
                        <button class="share-btn share-email" id="share-email">
                            <span>&#9993;</span> Email
                        </button>
                        <button class="share-btn share-download" id="share-download">
                            <span>&#8681;</span> Download
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toast-container" class="toast-container"></div>
    </div>

    <script src="/static/js/viewer.js"></script>
</body>
</html>
